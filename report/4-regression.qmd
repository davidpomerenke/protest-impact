## Baseline analysis via regression

### Mathematical notation

I want to determine the _Conditional Average Treatment Effect on the Treated (CATT)_ $\tau_T$ for different protest groups, and along multiple dimensions of newspaper coverage. I am not interested in the _Average Treatment Effect_ that is usually denoted by $\tau$, so I write $\tau:=\tau_T$.

The treatment units are _days_, with a treatment vector $W = [W_1, ..., W_m], m = |G|$ containing the treatments for each group (that is, whether the given group has protested on that day), and an outcome vector $Y = [Y_1, ..., Y_n], n=|Y|$ containing the number of articles published on that day for each dimension.

The CATT is generally defined as follows [@dingFirstCourseCausal2023, ch. 13]:

$$
\tau = E(Y|W=1) - E(Y(0) | W=1)
$$

Considering the protest groups and coverage dimensions:

$$
\tau_{g,d} = E(Y_d|W_g=1) - E(Y_d(0) | W_g=1)
$$


### Naive regression

The following assumptions allow us to use regression to determine the CATT:

- Unconfoundedness, $W \perp\!\!\!\perp Y(0) | X$: The counterfactual outcome if there was no treatment is independent from the actual treatment. (It is not plausible that this assumption actually holds, but regression will just serve as a baseline model.)
- Overlap, $e(X) < 1$ for the propensity score $e(X) = P(W=1|X)$: The treatment assignment is not deterministic.

Under these assumptions, we can identify $\tau$ as follows [see @dingFirstCourseCausal2023, ch. 13 for proof]:

$$
\begin{aligned}
\tau &= E(Y|W=1) - E(Y(0)|W=1) \\
&= E(Y|W=1) - E(E(Y|W=0,X) | W=1)
\end{aligned}
$$ {#eq-reg-indent}

We can specify a linear model for the expected outcome:
$$
E(Y|W,X) = \beta + \beta_W W + \beta_X X
$$ {#eq-reg-lin-model}

We can use @eq-reg-lin-model in @eq-reg-indent:

$$
\begin{aligned}
\tau &= E(Y|W=1) - E(E(Y|W=0,X) | W=1) \\
&= E(E(Y|W,X)|W=1) - E(E(Y|W=0,X) | W=1) \\
&= E(\beta + \beta_W + \beta_X X |W=1) - E(\beta + \beta_X X | W=1) \\
&= \beta_W
\end{aligned}
$$

The coefficient $\beta_W$ can be estimated via OLS and then serve as estimate for the CATT. Specifically, using the linear regression model

$$
E(Y_d|W_g,X) = \beta + \beta_W W_g + \beta_X X
$$ {#eq-reg-lin-model}

allows for the estimation of the CATT $\hat\tau_{g,d}=\hat\beta_W$ for all protest groups $g \in G$ and outcome dimensions $d \in D$.

### Regression with controls

### Combining multiple time series

(dummies vs regional)

### Delayed impact

Problem of differencing

### Cumulative impact
