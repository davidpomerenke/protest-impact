## NEW Regression {#sec-reg}

### Theory {#sec-reg-math}

The following assumptions allow us to use regression to determine the ATT:

- __Unconfoundedness__[^unconf-naming], $W \perp\!\!\!\perp Y(0) | X$: The counterfactual outcome if there was no treatment is independent from the actual treatment. (It is not plausible that this assumption actually holds, but regression will just serve as a baseline model.)
- __Overlap__, $e(X) < 1$ for the propensity score $e(X) = P(W=1|X)$: The treatment assignment is not deterministic.

[^unconf-naming]: Unconfoundedness is also known as _ignorability_, _selection on observables_, or _conditional independence_.

Under these assumptions, we can identify $\tau$ as follows [see @dingFirstCourseCausal2023, ch. 13 for proof]:

$$
\begin{aligned}
\tau &= E(Y|W=1) - E(Y(0)|W=1) \\
&= E(Y|W=1) - E(E(Y|W=0,X) | W=1)
\end{aligned}
$$ {#eq-reg-indent}

We can specify a linear model for the expected outcome:

$$
E(Y|W,X) = \beta + \beta_W W + \beta_X X
$$ {#eq-reg-lin-model}

We can use @eq-reg-lin-model in @eq-reg-indent:

$$
\begin{aligned}
\tau &= E(Y|W=1) - E(E(Y|W=0,X) | W=1) \\
&= E(E(Y|W,X)|W=1) - E(E(Y|W=0,X) | W=1) \\
&= E(\beta + \beta_W + \beta_X X |W=1) - E(\beta + \beta_X X | W=1) \\
&= \beta_W
\end{aligned}
$$ {#eq-reg-beta}

The coefficient $\beta_W$ can be estimated via _Ordinary Least Squares_ (OLS) regression, and then serve as estimate for the ATT. Specifically, the linear regression model

$$
E(Y_d|W_g,X) = \beta + \beta_W W_g + \beta_X X
$$

allows for the estimation of the ATT $\hat\tau_{g,d}=\hat\beta_W$ for all protest groups $g \in G$ and outcome dimensions $d \in D$.[^att-ate] Standard errors and confidence intervals can also be obtained from the OLS procedure.

[^att-ate]: Note that the ATT is here identical to the ATE, because "the linear model assumes constant causal effects across units" [@dingFirstCourseCausal2023, p. 165].

### Experiments

#### Anticipation effects

### Evaluation

- Placebo
- Train MSE vs OOD test MSE
